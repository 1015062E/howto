<br>
<table>
<td>WARNING</td>
<td>Please refer to this document with an understanding of the potential risks involved. Proceed at your own discretion.</td>
</table>
<br>

# Capturing and Analyzing HTTP Trace Logs

This guide provides step-by-step instructions on how to capture and analyze HTTP trace logs using `logman` and `tracerpt` commands. The content is generated by AI to help you with troubleshooting HTTP-related issues on a Windows server.

## Steps to Capture HTTP Trace Logs

1. **Remote to the server** where the Windows service in question is installed and run CMD(command prompt) as an administrator. Ensure you are in the correct directory as the log will be generated there. For example, create a temp folder under C and navigate to it:
   ```bash
   mkdir C:\temp
   cd C:\temp
   ```

2. **Start Capture**:
   Run the following command to start capturing HTTP trace logs:
   ```bash
   logman start httptrace -p Microsoft-Windows-HttpService 0xFFFF -o httptrace.etl -ets
   ```

3. **Reproduce the Issue**:
   After starting the trace above, reproduce the issue you are troubleshooting.

4. **Stop Capture**:
   Run the following command to stop capturing after the issue is reproduced:
   ```bash
   logman stop httptrace -ets
   ```

5. **Convert the Format**:
   Convert the captured ETL file to CSV and XML formats for easier analysis:
   ```bash
   tracerpt.exe httptrace.etl –of CSV -o httptrace.csv
   tracerpt.exe httptrace.etl -of XML -o httptrace.xml
   ```

6. **Upload Outputs**:
   Collect the following output files(select all these generated files, compress to a single .zip file) and upload them to the workspace:
   - `httptrace.csv`
   - `httptrace.etl`
   - `httptrace.xml`

## Understanding the Commands

### `logman` Command
- **`logman start httptrace -p Microsoft-Windows-HttpService 0xFFFF -o httptrace.etl -ets`**:
  - **`httptrace`**: Name of the trace session.
  - **`-p Microsoft-Windows-HttpService 0xFFFF`**: Specifies the provider(This provider captures events related to HTTP services, including request and response details, performance metrics, and error information) and event level.
  - **`-o httptrace.etl`**: Output file for the trace data.
  - **`-ets`**: Directs the command to interact with Event Trace Sessions directly(it ensures that the trace session starts immediately and captures events in real-time).

### `tracerpt` Command
- **`tracerpt.exe httptrace.etl –of CSV -o httptrace.csv`**: Converts the ETL file to CSV format.
- **`tracerpt.exe httptrace.etl -of XML -o httptrace.xml`**: Converts the ETL file to XML format.

<br>
https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/logman
<br>
https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/logman-start-stop
<br>
https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/tracerpt
<br>
https://learn.microsoft.com/en-us/windows-hardware/drivers/devtest/survey-of-software-tracing-tools
<br>


---

*Note: This content is generated by AI for informational purposes.*
